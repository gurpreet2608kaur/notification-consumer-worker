name = "notification-consumer-worker"
main = "src/worker.js"
compatibility_date = "2025-08-19"
compatibility_flags = ["nodejs_compat"]
[observability.logs]
enabled = true


# Hyperdrive binding (Postgres)
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "c3e1bf6e888a46a1815dfe02fa7559b1"

# ðŸ‘‡ Add this for local dev
localConnectionString = "postgresql://cladbetestuser:cladbe%40123@80.65.208.176:5432/cladbedatabase_testing"

# Queue consumer binding
[[queues.consumers]]
queue = "notification-queues"



[[durable_objects.bindings]]
name = "DURABLEOBJECT"
class_name = "MyDurableObject"
script_name = "notification-durable-object"

# scheduled Queue consumer binding
[[queues.consumers]]
queue = "scheduled-notification-queue"


[vars]
NOTIFICATION_QUEUE = "notification-queues"
SCHEDULED_NOTIFICATION_QUEUE = "scheduled-notification-queue"
FCM_PROJECT_ID= "cladbee-6554e"


[[workflows]]
binding = "NOTIFICATION_WORKFLOW"   # Access via env.NOTIFICATION_WORKFLOW
name = "NotificationWorkflow"       # Friendly display name
class_name = "NotificationWorkflow" # Must match your exported class


[[workflows]]
binding = "WHATSAPP_NOTIFICATION_WORKFLOW"
name = "WhatsappNotificationWorkflow"
class_name = "WhatsappNotificationWorkflow"


